import e,{Component as t}from"react";import{connect as r}from"react-redux";import o from"query-string";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?u(e):t}var p=function(r){function o(e){var t;return n(this,o),(t=h(this,i(o).call(this,e))).state={current:t.findColourByHex(t.props.colour.hex)},t}return l(o,t),s(o,[{key:"findColourByHex",value:function(e){var t=this.props.availableColours.find((function(t){return t.hex===e}));return t||this.props.alterableColours.find((function(t){return t.hex===e}))}},{key:"renderPallete",value:function(){var t=this,r=this.props.availableColours.map((function(r){var o=r.hex;return e.createElement("li",{key:o,className:o,style:{backgroundColor:"#".concat(o)},onClick:function(e){return t.props.onChangeComplete(t.findColourByHex(e.target.className))},onMouseOver:function(e){return t.setState({current:t.findColourByHex(e.target.className)})}})}));return e.createElement("ul",{className:"pallete"},r)}},{key:"render",value:function(){var t=this;return this.state.current?e.createElement("div",{className:"colour-picker"},e.createElement("div",{className:"current",style:{backgroundColor:"#".concat(this.state.current.hex),borderBottomColor:"#".concat(this.state.current.hex)},onMouseOver:function(){return t.setState({current:t.findColourByHex(t.props.colour.hex)})}},this.state.current.name),this.renderPallete()):(console.warn("Current colour is not in this variants colour pallete."),null)}}]),o}(),f=function(t){var r=t.show,o=void 0===r||r,n=t.colour,a=void 0===n?"red":n,s=t.inline;return e.createElement("div",{className:"preloader-wrapper small active ".concat(s?"inline":""," ").concat(o?"show":"")},e.createElement("div",{className:"spinner-layer spinner-".concat(a,"-only")},e.createElement("div",{className:"circle-clipper left"},e.createElement("div",{className:"circle"})),e.createElement("div",{className:"gap-patch"},e.createElement("div",{className:"circle"})),e.createElement("div",{className:"circle-clipper right"},e.createElement("div",{className:"circle"}))))},d=function(r){function o(e){var t;return n(this,o),(t=h(this,i(o).call(this,e))).state={showPicker:!1},t.handleChange=t.handleChange.bind(u(t)),t}return l(o,t),s(o,[{key:"handleChange",value:function(e){this.props.alterColour(this.props.index,e),this.props.updated(),this.setState({showPicker:!1})}},{key:"render",value:function(){var t,r,o=this;if(!this.props.colours[this.props.index])return null;var n=this.props.colours[this.props.index],a=this.props.patternLoaded;return e.createElement("div",{className:"layer",style:{marginBottom:"20px"}},(null===(t=a.instances)||void 0===t?void 0:t.length)>0&&(null===(r=a.instances)||void 0===r?void 0:r.includes("colour-".concat(this.props.index)))&&e.createElement(f,null),e.createElement("div",{className:"swatch",onMouseOver:function(){return o.setState({showPicker:!0})},onMouseLeave:function(){return o.setState({showPicker:!1})},style:{backgroundColor:"#".concat(n.hex)}},this.state.showPicker&&e.createElement("div",{className:"colour-picker-wrapper"},e.createElement(p,{colour:n,onChangeComplete:this.handleChange,availableColours:this.props.availableColours,alterableColours:this.props.alterableColours}))))}}]),o}();var m=r((function(e){return{colours:e.colours,patternLoaded:e.patternLoaded}}),{})(d),v=function(r){function a(e){var t;return n(this,a),(t=h(this,i(a).call(this,e))).state={showRestoreButton:!1},t.restoreDefaultColours=t.restoreDefaultColours.bind(u(t)),t}return l(a,t),s(a,[{key:"componentDidUpdate",value:function(){this.urlHasDefaultColours()||this.state.showRestoreButton||this.setState({showRestoreButton:!0}),this.urlHasDefaultColours()&&this.state.showRestoreButton&&this.setState({showRestoreButton:!1})}},{key:"restoreDefaultColours",value:function(){this.props.reset(),this.setState({showRestoreButton:!1})}},{key:"urlHasDefaultColours",value:function(){var e=this,t=o.parse(window.location.search),r=t.c1,n=t.c2,a=t.c3;return!!(r&&n&&a)&&[r,n,a].reduce((function(t,r,o){var n;return(null===(n=e.props.alterableColours[o])||void 0===n?void 0:n.hex)===r?t+1:t}),0)===this.props.alterableColours.length}},{key:"render",value:function(){var t=this;return e.createElement("div",{id:"layers"},this.props.alterableColours.map((function(r,o){return e.createElement(m,{key:o,index:o,updated:function(){return t.setState({showRestoreButton:!0})},alterableColours:t.props.alterableColours,availableColours:t.props.availableColours,alterColour:t.props.alterColour})})),this.state.showRestoreButton&&e.createElement("a",{className:"restore-defaults",onClick:this.restoreDefaultColours},e.createElement("i",{className:"material-icons black-text"},"restore")))}}]),a}(),w=function(r){function o(e){var t;return n(this,o),(t=h(this,i(o).call(this,e))).clickLeft=t.clickLeft.bind(u(t)),t.clickRight=t.clickRight.bind(u(t)),t.state={showLeftArrow:t.props.showNav,showRightArrow:t.props.showNav},t}return l(o,t),s(o,[{key:"componentWillUnmount",value:function(){this.props.close()}},{key:"clickLeft",value:function(){var e=this.props.modal;this.setState({showLeftArrow:e.onLeft(e.index)}),this.setState({showRightArrow:!0})}},{key:"clickRight",value:function(){var e=this.props.modal;this.setState({showRightArrow:e.onRight(this.props.index)}),this.setState({showLeftArrow:!0})}},{key:"render",value:function(){var t=this.props.modal,r=this.props.showNav,o=this.state,n=o.showLeftArrow,a=o.showRightArrow;return t.show?e.createElement("div",{id:"modal"},e.createElement("div",{className:"close",onClick:this.props.close},e.createElement("i",{className:"material-icons"},"close")),r&&n&&e.createElement("div",{className:"left",onClick:t.clickLeft},e.createElement("i",{className:"material-icons"},"chevron_left")),t.content,r&&a&&e.createElement("div",{className:"right"},e.createElement("i",{className:"material-icons",onClick:t.clickRight},"chevron_right"))):null}}]),o}();export{f as CircularPreloader,m as ColourLayer,v as ColourLayers,p as ColourPicker,w as Modal};

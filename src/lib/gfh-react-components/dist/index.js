"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var React=require("react"),React__default=_interopDefault(React),reactRedux=require("react-redux"),queryString=_interopDefault(require("query-string"));function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}var styles={colourPicker:"styles_colourPicker__2A9nI",current:"styles_current__2fE6b"},ColourPicker=function(e){function t(e){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).state={current:r.findColourByHex(r.props.colour.hex)},r}return _inherits(t,React.Component),_createClass(t,[{key:"findColourByHex",value:function(e){var t=this.props.availableColours.find((function(t){return t.hex===e}));return t||this.props.alterableColours.find((function(t){return t.hex===e}))}},{key:"renderPallete",value:function(){var e=this,t=this.props.availableColours.map((function(t){var r=t.hex;return React__default.createElement("li",{key:r,className:r,style:{backgroundColor:"#".concat(r)},onClick:function(t){return e.props.onChangeComplete(e.findColourByHex(t.target.className.split(" ").pop()))},onMouseOver:function(t){e.setState({current:e.findColourByHex(t.target.className.split(" ").pop())})}})}));return React__default.createElement("ul",{className:"pallete"},t)}},{key:"render",value:function(){var e=this;return this.state.current?React__default.createElement("div",{className:styles.colourPicker},React__default.createElement("div",{className:styles.current,style:{backgroundColor:"#".concat(this.state.current.hex),borderBottomColor:"#".concat(this.state.current.hex)},onMouseEnter:function(){return e.setState({current:e.findColourByHex(e.props.colour.hex)})}},this.state.current.name),this.renderPallete()):(console.warn("Current colour is not in this variants colour pallete."),null)}}]),t}(),styles$1={preloaderWrapper:"styles_preloaderWrapper__3iqCH",inline:"styles_inline__RUCpH",blue:"styles_blue__ga2kv",show:"styles_show__3YQCF",small:"styles_small__2hSUW"},CircularPreloader=function(e){var t=e.show,r=void 0===t||t,o=e.colour,a=void 0===o?"red":o,s=e.inline;return console.log(a),console.log(styles$1),console.log(styles$1[a]),React__default.createElement("div",{className:"preloader-wrapper small ".concat(styles$1.preloaderWrapper," ").concat(styles$1.small," active ").concat(s?styles$1.inline:""," ").concat(r?styles$1.show:"")},React__default.createElement("div",{className:"spinner-layer ".concat(styles$1[a]," spinner-").concat(a,"-only")},React__default.createElement("div",{className:"circle-clipper left"},React__default.createElement("div",{className:"circle"})),React__default.createElement("div",{className:"gap-patch"},React__default.createElement("div",{className:"circle"})),React__default.createElement("div",{className:"circle-clipper right"},React__default.createElement("div",{className:"circle"}))))},ColourLayer=function(e){function t(e){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).state={showPicker:!1},r.handleChange=r.handleChange.bind(_assertThisInitialized(r)),r.toggleHover=r.toggleHover.bind(_assertThisInitialized(r)),r.lastHoverColour=null,r}return _inherits(t,React.Component),_createClass(t,[{key:"handleChange",value:function(e){this.props.onAlterColour(this.props.index,e),this.props.updated(),this.setState({showPicker:!1})}},{key:"toggleHover",value:function(e){var t=this.props;t.index,t.colours,t.onAlterColour;this.setState({showPicker:e})}},{key:"render",value:function(){var e,t,r=this;if(!this.props.colours[this.props.index])return null;var o=this.props.colours[this.props.index];"ffffff"===o.hex&&this.lastHoverColour&&"ffffff"!==this.lastHoverColour.hex&&(o=this.lastHoverColour);var a=this.props,s=a.patternLoaded,l=a.availableColours,n=a.alterableColours;return React__default.createElement("div",{className:"layer",style:{marginBottom:"20px"}},(null===(e=s.instances)||void 0===e?void 0:e.length)>0&&(null===(t=s.instances)||void 0===t?void 0:t.includes("colour-".concat(this.props.index)))&&React__default.createElement(CircularPreloader,null),React__default.createElement("div",{className:"swatch",onMouseEnter:function(){return r.toggleHover(!0)},onMouseLeave:function(){return r.toggleHover(!1)},style:{backgroundColor:"#".concat(o.hex)}},this.state.showPicker&&React__default.createElement("div",{className:"colour-picker-wrapper"},React__default.createElement(ColourPicker,{colour:o,onChangeComplete:this.handleChange,availableColours:l,alterableColours:n}))))}}]),t}();function mapStateToProps(e){return{colours:e.colours,patternLoaded:e.patternLoaded}}var ColourLayer$1=reactRedux.connect(mapStateToProps,{})(ColourLayer),ColourLayers=function(e){function t(e){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).state={showRestoreButton:!1},r.restoreDefaultColours=r.restoreDefaultColours.bind(_assertThisInitialized(r)),r}return _inherits(t,React.Component),_createClass(t,[{key:"componentDidUpdate",value:function(){this.urlHasDefaultColours()||this.state.showRestoreButton||this.setState({showRestoreButton:!0}),this.urlHasDefaultColours()&&this.state.showRestoreButton&&this.setState({showRestoreButton:!1})}},{key:"restoreDefaultColours",value:function(){this.props.reset(),this.setState({showRestoreButton:!1})}},{key:"urlHasDefaultColours",value:function(){var e=this,t=queryString.parse(window.location.search),r=t.c1,o=t.c2,a=t.c3;return!!(r&&o&&a)&&[r,o,a].reduce((function(t,r,o){var a;return(null===(a=e.props.alterableColours[o])||void 0===a?void 0:a.hex)===r?t+1:t}),0)===this.props.alterableColours.length}},{key:"render",value:function(){var e=this;return React__default.createElement("div",{id:"layers"},this.props.alterableColours.map((function(t,r){return React__default.createElement(ColourLayer$1,{key:r,index:r,updated:function(){return e.setState({showRestoreButton:!0})},alterableColours:e.props.alterableColours,availableColours:e.props.availableColours,onAlterColour:e.props.onAlterColour})})),this.state.showRestoreButton&&React__default.createElement("a",{className:"restore-defaults",onClick:this.restoreDefaultColours},React__default.createElement("i",{className:"material-icons black-text"},"restore")))}}]),t}(),styles$2={modal:"styles_modal__17ehc",close:"styles_close__3u3rb"},Modal=function(e){function t(e){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).clickLeft=r.clickLeft.bind(_assertThisInitialized(r)),r.clickRight=r.clickRight.bind(_assertThisInitialized(r)),r.state={showLeftArrow:r.props.showNav,showRightArrow:r.props.showNav},r}return _inherits(t,React.Component),_createClass(t,[{key:"componentWillUnmount",value:function(){this.props.close()}},{key:"clickLeft",value:function(){var e=this.props.modal;this.setState({showLeftArrow:e.onLeft(e.index)}),this.setState({showRightArrow:!0})}},{key:"clickRight",value:function(){var e=this.props.modal;this.setState({showRightArrow:e.onRight(this.props.index)}),this.setState({showLeftArrow:!0})}},{key:"render",value:function(){var e=this.props.modal,t=this.props.showNav,r=this.state,o=r.showLeftArrow,a=r.showRightArrow;return e.show?React__default.createElement("div",{id:"modal",className:styles$2.modal},React__default.createElement("div",{className:styles$2.close,onClick:this.props.close},React__default.createElement("i",{className:"material-icons"},"close")),t&&o&&React__default.createElement("div",{className:"left",onClick:e.clickLeft},React__default.createElement("i",{className:"material-icons"},"chevron_left")),e.content,t&&a&&React__default.createElement("div",{className:"right"},React__default.createElement("i",{className:"material-icons",onClick:e.clickRight},"chevron_right"))):null}}]),t}();exports.CircularPreloader=CircularPreloader,exports.ColourLayer=ColourLayer$1,exports.ColourLayers=ColourLayers,exports.ColourPicker=ColourPicker,exports.Modal=Modal;
